{"ast":null,"code":"export {};","map":{"version":3,"names":[],"sources":["C:\\Users\\Asus\\source\\repos\\Frontend_Proyect_Personal\\ESTREMOR\\src\\app\\components\\Pages\\register\\register.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\nimport { FormBuilder, FormControl, Validators,FormGroup } from '@angular/forms';\nimport { CreateUserModel } from 'src/app/Models/Users/CreateUserModel';\nimport { UserServiceService } from 'src/app/services/Users/user-service.service';\nimport { faRightFromBracket, faImage,faUser, faCalendar, faIdCard, faLocationDot, faEnvelope, faXmark,faUsers,faPhone, faUserSecret} from '@fortawesome/free-solid-svg-icons';\nimport { Event, Router } from '@angular/router';\nimport { FireBaseService } from 'src/app/services/fireBase/fire-base.service';\nimport { FileService } from 'src/app/services/Files/file.service';\nimport { Containers } from 'src/containers';\nimport { Dialog } from '@angular/cdk/dialog';\nimport {} from \n\n@Component({\n  selector: 'app-register',\n  templateUrl: './register.component.html',\n  styleUrls: ['./register.component.scss']\n})\nexport class RegisterComponent {\n\n  imagenSeleccionada: File = new File([],'');\n  imagenBase64: string = '';\n  faUsers = faUsers;\n  faUser = faUser;\n  faPhone = faPhone;\n  faUserSecret = faUserSecret;\n  faEnvelope = faEnvelope;\n  faRightFromBracket = faRightFromBracket;\n  faLocationDot = faLocationDot;\n  faIdCard  = faIdCard;\n  faCalendar = faCalendar;\n  faImage = faImage;\n  rutaArchivo: string = '';\n  form:FormGroup = new FormGroup('');\n  imagen: string = '';\n\n\n  constructor\n  (\n    private formBuilder: FormBuilder,\n    private userService : UserServiceService,\n    private router: Router,\n    private fileService : FileService,\n    private dialog : Dialog\n  )\n  {\n    this.buidForm()\n  }\n\n  buidForm(){\n    this.form = this.formBuilder.group({\n        name: ['Luis Andres',[Validators.required]],\n        image : [this.imagen,[Validators.required]],\n        lastName: ['Martinez',[Validators.required]],\n        secondLastName: ['Estremor',[Validators.required]],\n        dateOfBirth: ['2023-06-21',[Validators.required]],\n        documentTypeId: ['1',[Validators.required]],\n        document: ['901282344',[Validators.required]],\n        numberPhone: ['3209876565',[Validators.required,Validators.minLength(10),Validators.maxLength(10)]],\n        email: ['luisandres@gamil.com',[Validators.required, Validators.email]],\n        password: ['Hola123*',[Validators.required]],\n        address: ['Carrera 31 #65A-21',[Validators.required]],\n        rolId:['1',[Validators.required]]\n    });\n  }\n\n  registerUser(event:any){\n    if(this.form.valid){\n      this.createUser();\n    }else{\n      this.form.markAllAsTouched();\n    }\n  }\n  createUser(){\n    const data = this.form.value;\n    data.image = this.rutaArchivo;\n    this.userService.create(data).\n    subscribe(response =>{\n      if(response){\n        console.log('reespuesta Create',response);\n        this.router.navigate(['/users'])\n      }\n    });\n\n  }\n\n  uploadFile(event: any){\n    const file = event.target.files[0];\n    let reader = new FileReader();\n    reader.onload = (e:any) =>{\n    this.imagen =  e.target.result; //base64\n  }\n    reader.readAsDataURL(file);\n\n    if(file){\n      this.fileService.uploadImage(file)\n      .subscribe(response =>{\n        if(response.succeeded){\n          this.rutaArchivo = response.data;\n        }\n      });\n    }\n  }\n\n  onUpload(event: any){\n    const element = event.target as HTMLInputElement;\n    const file = element.files?.item(0);\n\n    if(file){\n      this.fileService.uploadImage(file)\n      .subscribe(response =>{\n        if(response.succeeded){\n          this.rutaArchivo = response.data;\n        }\n      });\n    }\n  }\n\n  openModal(){\n    this.dialog.open()\n  }\n  }\n\n\n\n\n\n\n\n\n\n\n\n"],"mappings":""},"metadata":{},"sourceType":"module","externalDependencies":[]}